<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Command Line Interface</title>
<meta name="author" content="Adrian Perez &lt;aperez&#64;igalia.com&gt;" />
<meta name="copyright" content="2008 Igalia S.L." />
<link rel="stylesheet" href="../../style.css" type="text/css" />
</head>
<body>
<div class="document" id="command-line-interface">
<h1 class="title">Command Line Interface</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Adrian Perez &lt;<a class="reference external" href="mailto:aperez&#64;igalia.com">aperez&#64;igalia.com</a>&gt;</td></tr>
<tr><th class="docinfo-name">Copyright:</th>
<td>2008 Igalia S.L.</td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">GPL v2</td>
</tr>
</tbody>
</table>
<div class="abstract topic">
<p class="topic-title first">Abstract</p>
<p>User interaction using a command, line-oriented interface.</p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#cli-optparse" id="id1">cli_optparse</a></li>
</ul>
</div>
<div class="section" id="cli-optparse">
<h1><a class="toc-backref" href="#id1">cli_optparse</a></h1>
<pre class="literal-block">
cli_optparse [ -h ] [ -n ] options destination
</pre>
<p>Parses command line options. Supports both short and long options, as
well as specifying defaults for options and generating help messages.
Valid options, default values and descriptive texts for them are
specified as an array of 3-tuples of the following:</p>
<ul class="simple">
<li>Short and long option, separated with a colon. For example <tt class="docutils literal"><span class="pre">q:quiet</span></tt>
would allow the user to pass <tt class="docutils literal"><span class="pre">-q</span></tt> or <tt class="docutils literal"><span class="pre">--quiet</span></tt>.</li>
<li>Default value. For boolean options use <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>,
otherwise the next argument will be consumed.</li>
<li>Descriptive text for the option. This is only used to generate help
messages.</li>
</ul>
<p>The <em>destination</em> parameter should be a <a class="reference external" href="../data/hash.html">hash table</a> in which values for options will be stored. Make
sure it is initialized before calling this function.</p>
<p>As an example:</p>
<div class="highlight"><pre><span class="nv">opts</span><span class="o">=(</span>
    q:quiet  <span class="nb">false</span>    <span class="s1">&#39;Quiet operation&#39;</span>
    i:input  <span class="s1">&#39;&#39;</span>       <span class="s1">&#39;Takes one argument&#39;</span>
    u:user   <span class="s2">&quot;$USER&quot;</span>  <span class="s1">&#39;User name&#39;</span>
<span class="o">)</span>
</pre></div>
<p>The previous array defines options which allow all of the following
possibilities (among others):</p>
<div class="highlight"><pre>--quiet
-q --input input-file
-u john --quiet -i foo
</pre></div>
<p>If the <tt class="docutils literal"><span class="pre">-h</span></tt> switch is given, a help message is generated when
unrecognized command line options are found, and the process <strong>will
exit</strong> with a non-zero status. If not given, the help message is not
printed, but the function will have a non-zero exit status.</p>
<p>Command line will be parsed until the first non-option is found. The
<tt class="docutils literal"><span class="pre">CLI_LAST_ARG</span></tt> variable will be set to the index of the last proper
option.</p>
</div>
</div>
</body>
</html>
