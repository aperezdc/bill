<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Handles HTML form submissions</title>
<meta name="author" content="Adrián Pérez &lt;aperez&#64;igalia.com&gt;" />
<meta name="copyright" content="2008 Igalia S.L." />
<link rel="stylesheet" href="../../style.css" type="text/css" />
</head>
<body>
<div class="document" id="handles-html-form-submissions">
<h1 class="title">Handles HTML form submissions</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Adrián Pérez &lt;<a class="reference external" href="mailto:aperez&#64;igalia.com">aperez&#64;igalia.com</a>&gt;</td></tr>
<tr><th class="docinfo-name">Copyright:</th>
<td>2008 Igalia S.L.</td></tr>
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">GPL v2</td>
</tr>
</tbody>
</table>
<div class="abstract topic">
<p class="topic-title first">Abstract</p>
<p>Handles input in the formats provided by HTML forms.
This includes submissions in the <tt class="docutils literal"><span class="pre">multipart/form-data</span></tt> and
<tt class="docutils literal"><span class="pre">application/x-www-form-urlencoded</span></tt> encodings. This functionality
is typically needed in CGI scripts.</p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#form-urldecode" id="id1">form_urldecode</a></li>
<li><a class="reference internal" href="#form-multipart-handle" id="id2">form_multipart_handle</a></li>
<li><a class="reference internal" href="#form-handle" id="id3">form_handle</a></li>
</ul>
</div>
<div class="section" id="form-urldecode">
<h1><a class="toc-backref" href="#id1">form_urldecode</a></h1>
<pre class="literal-block">
form_urldecode
</pre>
<p>Reads data in a line-by-line basis from standard input, performs
URL-like decoding as defined in <a class="reference external" href="http://http://www.w3.org/Protocols/rfc1945/rfc1945">RFC 1945</a> and sends
it decoded to standard output.</p>
</div>
<div class="section" id="form-multipart-handle">
<h1><a class="toc-backref" href="#id2">form_multipart_handle</a></h1>
<pre class="literal-block">
form_multipart_handle directory
</pre>
<p>Decodes standard input in <tt class="docutils literal"><span class="pre">multipart/form-data</span></tt> encoding to multiple
files in a directory. The directory will be laid out as follows, for
a directory named <tt class="docutils literal"><span class="pre">output</span></tt>:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">output/pack</span></tt></dt>
<dd>File containing the  unprocessed input, minus the marker present
at the last line.</dd>
<dt><tt class="docutils literal"><span class="pre">output/raw/*</span></tt></dt>
<dd>Each file inside this directory is an unprocessed part of the input.</dd>
<dt><tt class="docutils literal"><span class="pre">output/body/*</span></tt></dt>
<dd>Each file inside this directory contains the bodies of the parts.</dd>
<dt><tt class="docutils literal"><span class="pre">output/headers/*</span></tt></dt>
<dd>Each file inside this directory contains the MIME headers of each
part.</dd>
</dl>
<p>For example, the first part will be named <tt class="docutils literal"><span class="pre">00</span></tt> (double-zero),
<tt class="docutils literal"><span class="pre">output/raw/00</span></tt> would be the unprocessed part, <tt class="docutils literal"><span class="pre">output/body/00</span></tt>
its content body and <tt class="docutils literal"><span class="pre">output/headers/00</span></tt> the corresponding MIME
headers. Each part is decoded using the <a class="reference external" href="mime.html#mime-decode">mime_decode</a> function.</p>
</div>
<div class="section" id="form-handle">
<h1><a class="toc-backref" href="#id3">form_handle</a></h1>
<pre class="literal-block">
form_handle qs_var [ tmpdir ]
</pre>
<p>Handles input if a HTML form, either from a <tt class="docutils literal"><span class="pre">POST</span></tt> or <tt class="docutils literal"><span class="pre">GET</span></tt> request.
In both cases the query string will be stored in the hash map
<tt class="docutils literal"><span class="pre">qs_var</span></tt>. When handling <tt class="docutils literal"><span class="pre">POST</span></tt> requests you may also want to
provide a temporary directory <tt class="docutils literal"><span class="pre">tmpdir</span></tt>, otherwise <tt class="docutils literal"><span class="pre">/tmp</span></tt> will be
always used. Data stored in <tt class="docutils literal"><span class="pre">qs_var</span></tt> can be accessed using the
functions in the <a class="reference external" href="../data/hash.html">data/hash</a> module.</p>
</div>
</div>
</body>
</html>
